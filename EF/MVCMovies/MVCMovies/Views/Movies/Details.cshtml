@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model Movie

<h1>@Model.Title</h1>
<ul>
    <li>Genre: @Model.Genre</li>
    <li>Rating: @Model.Rating</li>
    <li>Release date: @Model.ReleaseDate.ToString("d")</li>
    <li>Actors: @string.Join(", ",Model.Actors.Select(c => c.Name))</li>
    <hr />

    @if (User.IsInRole("User"))
    {
        <form asp-action="Rate" class="card card-body">
            <input type="hidden" name="Id" value="@Model.Id"  />
            <div class="d-flex">
                <span><input type="radio" name="Stars" value="1" /><i class="fa fa-star text-warning"></i></span>
                <span><input type="radio" name="Stars" value="2" /><i class="fa fa-star text-warning"></i></span>
                <span><input type="radio" name="Stars" value="3" /><i class="fa fa-star text-warning"></i></span>
                <span><input type="radio" name="Stars" value="4" /><i class="fa fa-star text-warning"></i></span>
                <span><input type="radio" name="Stars" value="5" /><i class="fa fa-star text-warning"></i></span>
            </div>
            <div class="form-outline">
                <label class="form-label" for="textcomment">Enter your Comments</label>
                <textarea class="form-control" name="Comment" id="textcomment" value="@Model.Id" rows="3"></textarea>
            </div>
            <br />
                <button type="submit" class="btn btn-primary">Send</button>
        </form>
        
    }
    else
    {
        <div class="lead">Iniciar sesión como usuario para poder calificar</div>
    }
    <hr />
    @foreach(var rate in Model.Rates)
    {
        <h5>@rate.User.Name</h5>
        for (int i = 0; i < rate.Stars; i++)
        {
            <span class="me-2"><i class="fa fa-star text-warning"></i></span>
        }
        for (int i = 0; i < 5 - rate.Stars; i++)
        {
            <span class="me-2"><i class="fa fa-star"></i></span>
        }
        <p>@rate.Comment</p>
    }
    <hr />

</ul>